apiVersion: admissionregistration.k8s.io/v1beta1
kind: ValidatingWebhookConfiguration
metadata:
  name: pod-validate-webhook
  labels:
    app: pod-validate-webhook
    kind: validator
webhooks:
  - name: pod-validate-webhook.example.com
    clientConfig:
      # replace with your webhook endpoint (can also be a service-exposed kubernetes deployment)
      url: "https://webhook.example.com:8080/"
      # replace with your base64 encoded CA cert for the webhook
      caBundle: LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSUVWakNDQXI2Z0F3SUJBZ0lSQVBtR01vTkEvbVlpNDhCdmN3UDh1a1V3RFFZSktvWklodmNOQVFFTEJRQXcKYXpFZU1Cd0dBMVVFQ2hNVmJXdGpaWEowSUdSbGRtVnNiM0J0Wlc1MElFTkJNU0F3SGdZRFZRUUxEQmR0WjJGegpZMmhBVFVkQlUwTklMVTFCUXk1c2IyTmhiREVuTUNVR0ExVUVBd3dlYld0alpYSjBJRzFuWVhOamFFQk5SMEZUClEwZ3RUVUZETG14dlkyRnNNQjRYRFRFNE1USXdOakV6TVRNeU1sb1hEVEk0TVRJd05qRXpNVE15TWxvd1N6RW4KTUNVR0ExVUVDaE1lYld0alpYSjBJR1JsZG1Wc2IzQnRaVzUwSUdObGNuUnBabWxqWVhSbE1TQXdIZ1lEVlFRTApEQmR0WjJGelkyaEFUVWRCVTBOSUxVMUJReTVzYjJOaGJEQ0NBU0l3RFFZSktvWklodmNOQVFFQkJRQURnZ0VQCkFEQ0NBUW9DZ2dFQkFOUE5oZE56N1FTKzJaRlJVcWZ6aE9CcXY5UEMyRUlVNFBmbURMUVY1NkpJMDVSaFJFTTUKVmJiY0xUdXhDUlpBRmhQbElGQkk0bi90SUIzSDEwRUc0NE5CVU90VnJiV0JTTnpjQ3MxYzJSM041T3ZweEc5Wgp6djl4TGswTUxNaENyWk1wYlJ3bDBSdUxIMVhpbmk4L1haZjJ1ZUowbkJVVlFBb1YvRGJrbzhqVEhtUzNRQlIzCkF6RW1XS05JK2xucWFneUY3Q0w5V0E4aGowTFJmSmFVMEdXd1JCd2ZxamxCdzN2R2R0SExvWHUyenJGNUhFRGMKdlc5SmZZWUo2RVFIMWR6QXZtWWEvTm8rVFRjTWEzaGNZYmpJekJ3RW1MUmV5SHFiZldFcUlPWFFFOElLMEVBcQpaRWg5Q2RxRmRodm82WWxYWHhrYytrT0hmQnY3LzBhcnhsa0NBd0VBQWFPQmxEQ0JrVEFPQmdOVkhROEJBZjhFCkJBTUNCYUF3RXdZRFZSMGxCQXd3Q2dZSUt3WUJCUVVIQXdFd0RBWURWUjBUQVFIL0JBSXdBREFmQmdOVkhTTUUKR0RBV2dCUWRqaCtGdWRwazRhbXU0a08wYnBrN2w5bWRoakE3QmdOVkhSRUVOREF5Z2cwcUxtVjRZVzF3YkdVdQpZMjl0Z2dsc2IyTmhiR2h2YzNTSEJIOEFBQUdIRUFBQUFBQUFBQUFBQUFBQUFBQUFBQUV3RFFZSktvWklodmNOCkFRRUxCUUFEZ2dHQkFMSDdMR2JMNWJsbTNIQlpPUWl0VlBKY2M5WkYxTnY4OE5KdWNNbVBnM0hGbTJjYmhXS3UKSUUvejN5a1kwS1Nhby83UVBQME9zdFZPRmE2SjdmWDBXRmRFbWNwQlRXVi9ONGVobmZtY094TzlWVUhZSGpjRQo1dzYwTEgrNXRPK3ZKazlEUkxvN0ZseDVrZ2J1ME1Tck16amJlaE5PeFdra3NXSElxckpmNkFuV0NaV1BGV3I2CjUrTEpLL2M3cjFIUFBWNisvbDJSaFE1UnVQMmlESzBvM2RpR3hYMis1MEllb1RsdmZNTWs2ZXRMWVpvYjVvRC8KMXNhTEJlbkR3OXRTb01WWFBqcXR3TTZENlR2dHJTT0lDM3RzSTduaXRqZzE4eFhROUtZcGdsalJHRjdzZDlyLwo2eG5zY0JpSWRHZzZIR3hXLzd6ZlpIcXN2TGRiSE5IdUZyaHBLZXZMT0FkeWtQZlpNZjVpaEFjYWxodFNuYUZlClNDeGtwN0N2QW40eFh1aGZvMGs5QWREQklhYVkrVTRMM1pvV1duTWtHVmxtKzRBdG9Yc1MxVTBnYTBwUUdobmcKU05sTlA1UkNGaDA1TDdIemFJU3lScU1xUFhrbmxNYjhrSVQrWkFqODgvSXQ1R1pNNzRYTWRCRkw0QmZjU2RuNwpmeThOS1VPMDU3dGpoZz09Ci0tLS0tRU5EIENFUlRJRklDQVRFLS0tLS0K
    rules:
      - operations: [ "CREATE" ]
        apiGroups: [""]
        apiVersions: ["v1"]
        resources: ["pods"]
    failurePolicy: Fail
        